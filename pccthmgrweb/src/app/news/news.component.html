

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <p><img src="../assets/img/nn3.png" style="width: 250px; height: 40px;"></p>
 <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor02" aria-controls="navbarColor02" aria-expanded="false" aria-label="Toggle navigation">
 <span class="navbar-toggler-icon"></span>
 </button>
 <div class="collapse navbar-collapse" id="navbarColor02">
    <ul class="navbar-nav mr-auto">
       <!-- <li class="nav-item active">
          <a class="nav-link" (click)="onOpenModal(null, 'add')">เพิ่มรายชื่อพนักงาน <span class="sr-only">(current)</span></a>
      </li> -->
      <!-- <li class="nav-item active">   
         <a class="nav-link">Export XLS <span class="sr-only">(current)</span></a>
     </li> -->
     <li class="nav-item active"> 
      <a class="nav-link" (click)="reloadPage()">รายชื่อพนักงาน <span class="sr-only">(current)</span></a>
      </li>
     <li class="nav-item active"> 
     <a class="nav-link" (click)="onOpenModalNews('add' , null)">เพิ่มข่าว <span class="sr-only">(current)</span></a>
     </li>
     
     <!-- <li class="nav-item active">   
      <a class="nav-link" (click)="DeletToken()">ออกจากระบบ <span class="sr-only">(current)</span></a>
     </li> -->

    </ul>
    <form class="form-inline my-2 my-lg-0">
      <h5 style="color: aliceblue;">ยินดีต้อนรับ : {{getname}}</h5> &nbsp; &nbsp;&nbsp; &nbsp;
       <input type="search" (ngModelChange)="searchEmployees(key.value)" #key="ngModel" ngModel
        name="key" id="searchName" class="form-control mr-sm-2" placeholder="ค้นหาข่าว..." required>
    </form>
 </div>
</nav>
<div class="container" id="main-container">
   <div class="row">
    <div *ngFor="let filenews of allfilenames" class="col-md-6 col-xl-3">
       <div class="card m-b-30">
        <form #newsid="ngForm">
          <div align = "right" *ngIf=" dateText === filenews?.datenews">
            <span class="badge badge-warning"><i class='fas fa-star' style="color: black;"></i>NEW</span>
          </div>
          <div class="card-body row">
              <img src="{{filenews?.imgurl}}" alt="" class="img-fluid" style="width: 250px; height: 150px;">
      
             <!-- <div class="col-6 card-title align-self-center mb-0">
                <h5>{{filenews?.newsname}}</h5>
                <p class="m-0">ตำแหน่ง : {{filenews?.jobTitle}}</p>
                <p class="m-0">แผนก : {{filenews?.department}}</p>
             </div> -->
          </div>
          <ul class="list-group list-group-flush">
            <li class="list-group-item">
              <i class="fa fa-envelope float-right"></i> <h5>{{filenews?.newsname}}</h5>
            </li>
          
             <li class="list-group-item ie11Support"><i class="fa fa-envelope float-right"></i>{{filenews?.textnews}}</li>
            
             <!-- <li class="list-group-item"><i class="fa fa-phone float-right"></i>เบอร์โทรศัพท์ : {{employee?.phone}}</li> -->
          </ul>
          <div class="card-body">
            <div class="list-group"></div>
            <i class='fas fa-clock' style="color: black;"></i> {{filenews?.datenews}}
             <div class="float-right btn-group btn-group-sm"> 
              <input type="hidden" ngModel="{{filenews?.newsid}}" name="newsid" class="form-control" id="newsid">
              <input type="hidden" ngModel="{{filenews?.newsname}}" name="newsname" class="form-control" id="newsname">
              <input type="hidden" ngModel="{{filenews?.textnews}}" name="textnews" class="form-control" id="textnews">
              <input type="hidden" ngModel="{{filenews?.imgurl}}" name="imgurl" class="form-control" id="imgurl">
              <input type="hidden" ngModel="{{filenews?.datenews}}" name="datenews" class="form-control" id="datenews">
             
              <button type="button" (click)="onOpenModalNews('list',newsid.value)" class="btn btn-outline-primary">ดูเพิ่มเติม ></button>
             </div>
          </div>
        </form>
       </div>
    </div>

</div>
 <!-- Add Employee Modal -->
<div class="modal fade" id="addNewsModal" tabindex="-1" role="dialog" aria-labelledby="addEmployeeModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
       <div class="modal-header">
          <h3 class="modal-title" id="addEmployeeModalLabel">เพิ่มข่าว</h3>
          <!-- <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
          </button> -->
        </div>
       <div class="modal-body">
        <form #addNewsForm="ngForm">

          <div class="form-group">
            <label for="phone">URL รูปภาพข่าว</label>
            <input type="text" ngModel name="imgurl" class="form-control" id="imgurl" placeholder="Image URL">
         </div>

        <div class="form-group">
            <label for="news_name">หัวข้อข่าว</label>
            <input type="text" ngModel name="newsname" class="form-control" id="newsname" placeholder="ใส่หัวข้อข่าว" required>
         </div>
         <div class="form-group">
          <label for="news_detail">รายละเอียดข่าว</label>
          <textarea  ngModel name="textnews" class="form-control" id="textnews" placeholder="ใส่รายละเอียดข่าว" rows="4" required></textarea>
        </div>

          <label>กรุณาเลือกไฟล์ที่ต้องการ Upload</label>
            <div *ngIf="fileStatus.status==='progress'">
              <div class="progress">
                <div [style.width.%]="fileStatus.percent" class="progress-bar progress-bar-animated bg-info" role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100">
                    {{ fileStatus.requestType }} {{ fileStatus.percent }}
                </div>
              </div>
            </div>

            <div *ngIf="filenamesProgressnew?.length > 0" class="js-upload-finished">     
              <div *ngFor="let filename of filenamesProgressnew" class="list-group">
                <a (click)="onDownloadFile(filename)" class="list-group-item list-group-item-success" style="cursor: pointer;">
                  {{ filename }}
                </a><br>
              </div>
            </div>
            <form enctype="multipart/form-data">
              <fieldset>
                <div class="form-group">
                  <div>
                    <input id="filesname" type="file" name="filesname" (change)="onUploadFiles($event.target.files)" multiple class="form-control"  #filename required/>
                  </div>
                </div>
              </fieldset>
            </form>
            <div class="modal-footer">
              <button type="button" id="add-employee-form" class="btn btn-secondary"(click)="datadismiss()"  data-dismiss="modal" >ปิด</button>
              <button type="button" id="add-employee-form" class="btn btn-primary"(click)="addnews(addNewsForm.value)" data-dismiss="modal"  >อัปโหลด</button>
            </div>
          </form>
       </div>
    </div>
  </div>
</div>

   

<div class="modal fade" id="listNewsModal" tabindex="-1" role="dialog" aria-labelledby="listNewsModal" aria-hidden="true" style="width: 100%;">
  <div class="modal-dialog" role="document">
    <div class="modal-content" style="width: 130%;">
       <div class="modal-header">
          <h3 class="modal-title" id="addEmployeeModalLabel">รายละเอียดข่าว</h3>
        </div>
       <div class="modal-body">

        

      <div *ngIf="filenames?.length > 0" class="js-upload-finished">

        <div class="list-group">
          <h5>{{text.newsname}}</h5>
          <img src="{{text?.imgurl}}" alt="" class="img-fluid">
          <p>{{text.textnews}}</p>
          <br>
          <h5 align = "center">ไฟล์ Download</h5> 
          <hr style="background-color: #089d6b;">
          <br>
        </div>

        <div *ngFor="let filename of filenames" class="list-group">
          <a (click)="onDownloadFile(filename)" class="list-group-item list-group-item-success" style="cursor: pointer;">
            {{ filename }}
            <a class="alert-success float-right">Download ไฟล์</a>
          </a><br>
        </div>
      </div>

       </div>
    </div>
  </div>
</div>