

<!-- <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <p><img src="../assets/img/nn3.png" style="width: 250px; height: 40px;"></p>
 <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor02" aria-controls="navbarColor02" aria-expanded="false" aria-label="Toggle navigation">
 <span class="navbar-toggler-icon"></span>
 </button>
 <div class="collapse navbar-collapse" id="navbarColor02">
    <ul class="navbar-nav mr-auto">
       <li class="nav-item active">
          <a class="nav-link" (click)="onOpenModal(null, 'add')">เพิ่มรายชื่อพนักงาน <span class="sr-only">(current)</span></a>
      </li> 
       <li class="nav-item active">   
         <a class="nav-link">Export XLS <span class="sr-only">(current)</span></a>
     </li>
     <li class="nav-item active"> 
      <a class="nav-link" (click)="reloadPage()">รายชื่อพนักงาน <span class="sr-only">(current)</span></a>
      </li>
     <li class="nav-item active"> 
     <a class="nav-link" (click)="onOpenModalNews('add' , null)">เพิ่มข่าว <span class="sr-only">(current)</span></a>
     </li>
     
     <li class="nav-item active">   
      <a class="nav-link" (click)="DeletToken()">ออกจากระบบ <span class="sr-only">(current)</span></a>
     </li>

    </ul>
    <form class="form-inline my-2 my-lg-0">
      <h5 style="color: aliceblue;">ยินดีต้อนรับ : {{getname}}</h5> &nbsp; &nbsp;&nbsp; &nbsp;
       <input type="search" (ngModelChange)="searchEmployees(key.value)" #key="ngModel" ngModel
        name="key" id="searchName" class="form-control mr-sm-2" placeholder="ค้นหาข่าว..." required>
    </form>
 </div>
</nav> -->
<div class="container" id="main-container">

  <form class="flex items-center m-5">   
    <div class="relative w-full">
        <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
            <svg aria-hidden="true" class="w-5 h-5 text-gray-500 dark:text-gray-400" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"></path></svg>
        </div>
        <input type="search" (ngModelChange)="searchEmployees(key.value)" #key="ngModel" ngModel name="key" id="searchName" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5  dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="ค้นหาข่าว..." required>
    </div>
</form>

<div class="container text-center" id="main-container">  
  <button type="button" (click)="onOpenModalNews('add' , null)" class=" text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800"> + เพิ่มข่าว</button>
  </div>

   <div class="row m-5">
    <div *ngFor="let filenews of allfilenames" class="col-md-6 col-xl-3">
       <!-- <div class="card m-b-30">
        <form #newsid="ngForm">
          <div align = "right" *ngIf=" dateText === filenews?.datenews">
            <span class="badge badge-warning"><i class='fas fa-star' style="color: black;"></i>NEW</span>
          </div>
          <div class="card-body row">
              <img src="{{filenews?.imgurl}}" alt="" class="img-fluid" style="width: 250px; height: 150px;">
          </div>
          <ul class="list-group list-group-flush">
            <li class="list-group-item">
              <i class="fa fa-envelope float-right"></i> <h5>{{filenews?.newsname}}</h5>
            </li>
          
             <li class="list-group-item ie11Support"><i class="fa fa-envelope float-right"></i>{{filenews?.textnews}}</li>
          </ul>
          <div class="card-body">
            <div class="list-group"></div>
            <i class='fas fa-clock' style="color: black;"></i> {{filenews?.datenews}}
             <div class="float-right btn-group btn-group-sm"> 
              <input type="hidden" ngModel="{{filenews?.newsid}}" name="newsid" class="form-control" id="newsid">
              <input type="hidden" ngModel="{{filenews?.newsname}}" name="newsname" class="form-control" id="newsname">
              <input type="hidden" ngModel="{{filenews?.textnews}}" name="textnews" class="form-control" id="textnews">
              <input type="hidden" ngModel="{{filenews?.imgurl}}" name="imgurl" class="form-control" id="imgurl">
              <input type="hidden" ngModel="{{filenews?.datenews}}" name="datenews" class="form-control" id="datenews">
             
              <button type="button" (click)="onOpenModalNews('list',newsid.value)" class="btn btn-outline-primary">ดูเพิ่มเติม ></button>
             </div>
          </div>
        </form>
       </div> -->

       <div class="max-w-sm rounded overflow-hidden shadow-lg dark:bg-gray-800 dark:border-gray-700">

        <form #newsid="ngForm">
        <img class="w-full" src="{{filenews?.imgurl}}" alt="Sunset in the mountains">
        <div class="px-6 py-4">
          <div class="dark:text-gray-400">    
            <span *ngIf=" dateText === filenews?.datenews" class="inline-block bg-vuejs-254 rounded-full px-2 py-1 text-xs font-semibold text-vuejs-153 mr-1 mb-1" ><i class='fas fa-star'></i> NEW</span>
            <a class="ml-2 uppercase text-xs font-semibold tracking-wide"> <i class='fas fa-clock dark:text-gray-400'></i> {{filenews?.datenews}}</a>
          </div>
          <div class="font-bold text-base mb-2 dark:text-white">{{filenews?.newsname}}</div>
          <p class="text-gray-700 text-base ie11Support dark:text-gray-400">{{filenews?.textnews}}</p>
          <input type="hidden" ngModel="{{filenews?.newsid}}" name="newsid" class="form-control" id="newsid">
          <input type="hidden" ngModel="{{filenews?.newsname}}" name="newsname" class="form-control" id="newsname">
          <input type="hidden" ngModel="{{filenews?.textnews}}" name="textnews" class="form-control" id="textnews">
          <input type="hidden" ngModel="{{filenews?.imgurl}}" name="imgurl" class="form-control" id="imgurl">
          <input type="hidden" ngModel="{{filenews?.datenews}}" name="datenews" class="form-control" id="datenews">
        </div>
        </form>
        <div class="px-6 pt-4 pb-2">
          <button type="button" (click)="onOpenModalNews('list',newsid.value)" class="btn btn-outline-primary">ดูเพิ่มเติม ></button>   
        </div>
        <br>
      </div>
    </div>

</div>
 <!-- Add Employee Modal -->
<div class="modal fade" id="addNewsModal" tabindex="-1" role="dialog" aria-labelledby="addEmployeeModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content dark:bg-darkModecolors-59">
       <div class="modal-header">
          <h3 class="modal-title mb-4 text-xl font-medium text-gray-900 dark:text-white" id="updateEmployeeModalLabel">เพิ่มข่าว</h3>
        </div>
       <div class="modal-body">
        <form #addNewsForm="ngForm"> 

          <div class="form-group">
            <label for="phone" class="text-gray-900 dark:text-white">URL รูปภาพข่าว</label>
            <input type="text" required #displayURL="ngModel" ngModel name="imgurl"  id="imgurl" placeholder="Image URL" class="form-control  appearance-none border rounded w-full py-3 px-3 text-gray-700 leading-tight focus:outline-none dark:bg-darkModecolors-59 dark:text-darkModecolors-252">
            <div class="alert-danger" *ngIf="displayURL.invalid">
              <div *ngIf="displayURL?.touched && displayURL?.hasError('required')">URL is required</div>
            </div>
         </div>
         

        <div class="form-group">
            <label for="news_name" class="text-gray-900 dark:text-white">หัวข้อข่าว</label>
            <input type="text" #displaynews_name="ngModel" minlength="5" maxlength="100" ngModel name="newsname" id="newsname" placeholder="ใส่หัวข้อข่าว" required class="form-control  appearance-none border rounded w-full py-3 px-3 text-gray-700 leading-tight focus:outline-none dark:bg-darkModecolors-59 dark:text-darkModecolors-252">
            <div class="alert-danger" *ngIf="displaynews_name.invalid">
              <div *ngIf="displaynews_name?.touched && displaynews_name?.hasError('required')">news name is required</div>
              <div *ngIf="displaynews_name?.touched && displaynews_name?.errors.minlength">Display Name must be at least 5 characters</div>
              <div *ngIf="displaynews_name?.touched && displaynews_name?.errors.maxlength">Display Name must be at most 100 characters</div>
            </div>
         </div>
         <div class="form-group">
          <label for="news_detail" class="text-gray-900 dark:text-white">รายละเอียดข่าว</label>
          <textarea minlength="5"  #displaynews_detail="ngModel"  ngModel name="textnews" class="form-control dark:bg-darkModecolors-59 dark:text-darkModecolors-252" id="textnews" placeholder="ใส่รายละเอียดข่าว" rows="4" required></textarea>
          <div class="alert-danger" *ngIf="displaynews_detail">
            <div *ngIf="displaynews_detail?.touched && displaynews_detail?.hasError('required')">detail is required</div>
            <div *ngIf="displaynews_detail?.touched && displaynews_detail?.errors.minlength">detail must be at least 5 characters</div>
          </div>
        </div>

          <label class="text-gray-900 dark:text-white">กรุณาเลือกไฟล์ที่ต้องการ Upload</label>
            <div *ngIf="fileStatus.status==='progress'">
              <div class="progress">
                <div [style.width.%]="fileStatus.percent" class="progress-bar progress-bar-animated bg-info" role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100">
                    {{ fileStatus.requestType }} {{ fileStatus.percent }}
                </div>
              </div>
            </div>

            <div *ngIf="filenamesProgressnew?.length > 0" class="js-upload-finished"> 
              <div *ngFor="let filename of filenamesProgressnew" class="list-group">
                <a class="flex items-center p-3 text-base font-bold text-gray-900 rounded-lg bg-gray-50 hover:bg-gray-100 group hover:shadow dark:bg-gray-600 dark:hover:bg-gray-500 dark:text-white m-3 cursor-pointer">
                  <span class="flex-1 ml-3 whitespace-nowrap">{{ filename }}</span>
              </a>
              </div>
            </div>
            <form enctype="multipart/form-data">
              <fieldset>
                <div class="form-group">
                  <div >
                    <input id="filesname" type="file" name="filesname" (change)="onUploadFiles($event.target.files)" multiple class="form-control"  #filename required/>
                  </div>
                </div>
              </fieldset>
            </form>
            <div class="modal-footer">
              <button type="button" id="add-employee-form" class="btn btn-secondary"(click)="datadismiss()"  data-dismiss="modal" >ปิด</button>
              <button type="button" [disabled]="!addNewsForm.valid" id="add-employee-form" class="btn btn-primary"  data-dismiss="modal" (click)="addnews(addNewsForm.value)">อัปโหลด</button>
            </div>
          </form>
       </div>
    </div>
  </div>
</div>

   

<div class="modal fade" id="listNewsModal" tabindex="-1" role="dialog" aria-labelledby="listNewsModal" aria-hidden="true" style="width: 100%;">
  <div class="modal-dialog" role="document">
    <div class="modal-content w-auto dark:bg-darkModecolors-59">
       <div class="modal-header">
          <h3 class="modal-title mb-4 text-xl font-medium text-gray-900 dark:text-white" id="updateEmployeeModalLabel">รายละเอียดข่าว</h3>
          <button type="button" class="close dark:text-white" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
            </button>
        </div>
       <div class="modal-body">

        

      <div *ngIf="filenames?.length > 0" class="js-upload-finished">

        <div class="list-group">
         <strong><h4 class="text-xl text-center text-black dark:text-white">{{text.newsname}}</h4></strong> 
          <img src="{{text?.imgurl}}" alt="" class="img-fluid m-5">
          <p class="dark:text-gray-400">{{text.textnews}}</p>
          <br>
          <h5 align = "center" class="text-black dark:text-white"><i class="	fa fa-arrow-circle-down"></i>ไฟล์ Download</h5> 
        </div>

      <div class="rounded-lg border-2 m-3">
        <div *ngFor="let filename of filenames" class="list-group">
          <!-- <a (click)="onDownloadFile(filename)" class="list-group-item list-group-item-success" style="cursor: pointer;">
            {{ filename }}
            <a class="alert-success float-right">Download ไฟล์</a>
          </a><br> -->

          <a (click)="onDownloadFile(filename)"  class="flex items-center p-3 text-base font-bold text-gray-900 rounded-lg bg-gray-50 hover:bg-gray-100 group hover:shadow dark:bg-gray-600 dark:hover:bg-gray-500 dark:text-white m-3 cursor-pointer">
            <p><img src="assets/img/pdficon.png" class="h-10 mx-auto"></p>
            <span class="flex-1 ml-3 whitespace-nowrap">{{ filename }}</span>
            <span class="inline-flex items-center justify-center px-2 py-0.5 ml-3 text-xs font-medium text-gray-500 bg-gray-200 rounded dark:bg-gray-700 dark:text-gray-400">Download</span>
        </a>
        </div>
      </div>

      </div>

       </div>
    </div>
  </div>
</div>






